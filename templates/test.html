<div class="row g-3 mb-3">
    <div class="col">
        <label for="requirement-type" class="form-label fw-semibold">Requirement</label>
        <select class="form-control form-select py-2" name="requirement-type" id="requirement-type" required>
            <option value="">Choose a requirement</option>
            <option value="Product">Product</option>
            <option value="Service">Service</option>
        </select>
        <div class="invalid-feedback">Please select a requirement.</div>
    </div>

    <div id="serviceInput" class="col" style="display: none;">
        <label for="service" class="form-label fw-semibold">Service</label>
        <div class="input-group">
            <select class="form-control form-select py-2" name="service" id="service">
                <option value="">Choose a service</option>
                {% for service in services %}
                <option value="{{ service.Service_Name }}">{{ service.Service_Name }}</option>
                {% endfor %}
            </select>

            <a href="#" class="input-group-text rounded-end" data-bs-toggle="modal" data-bs-target="#serviceModal" style="text-decoration: none;">
                <i class="fa-solid fa-plus" style="color: #212529;"></i>
            </a>
            <div class="invalid-feedback">Please select a service.</div>
        </div>
    </div>
    
    <div id="brandInput" class="col" style="display: none;">
        <div class="row g-3">
            <div class="col">
                <label for="product" class="form-label fw-semibold">Product Name</label>
                <input type="text" class="form-control py-2" name="product" id="product">
                <div class="invalid-feedback">Please enter a product name.</div>
            </div>
            
            <div class="col">
                <label for="brand" class="form-label fw-semibold">Brand</label>
                <div class="input-group">
                    <select class="form-control form-select py-2" name="brand" id="brand">
                        <option value="">Choose a brand</option>
                        {% for brand in brands %}
                        <option value="{{ brand.Brand_Name }}">{{ brand.Brand_Name }}</option>
                        {% endfor %}
                    </select>

                    <a href="#" class="input-group-text rounded-end" data-bs-toggle="modal" data-bs-target="#brandModal" style="text-decoration: none;">
                        <i class="fa-solid fa-plus" style="color: #212529;"></i>
                    </a>
                    <div class="invalid-feedback">Please select a brand.</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="mb-3">
    <label for="requirement-description" class="form-label fw-semibold">Requirement Description</label>
    <textarea class="form-control" name="requirement-description" id="requirement-description" cols="30" rows="5" required>{{ company.Requirement_Description }}</textarea>
    <div class="invalid-feedback">Please enter a requirement description.</div>
</div>

<script>
    var requirementDropdown = document.getElementById("requirement-type");
            var brandInput = document.getElementById("brandInput");
            var serviceInput = document.getElementById("serviceInput");

            requirementDropdown.addEventListener("change", function(){
                var selectedRequirement = requirementDropdown.value;
                if(selectedRequirement === "Product"){
                    brandInput.style.display = "block";
                    serviceInput.style.display = "none";
                }else if(selectedRequirement === "Service"){
                    serviceInput.style.display = "block";
                    brandInput.style.display = "none";
                }else{
                    brandInput.style.display = "none";
                    serviceInput.style.display = "none";
                }
            });

    

            document.getElementById("submitServiceBtn").addEventListener("click", function(){
                handleFormSubmission("serviceForm", "service", "#serviceModal", "service_name");
            });

            document.getElementById("submitBrandBtn").addEventListener("click", function(){
                handleFormSubmission("brandForm", "brand", "#brandModal", "brand_name");
            });
</script>